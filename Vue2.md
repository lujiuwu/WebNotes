# 生命周期
*  生命周期函数的名字不可更改，但函数的具体内容是程序员根据需求写的
* this指向vm或者组件实例对象
## 一、创建数据代理 ，数据检测
### beforeCreate() - 创建前
##### 指的是数据监测和数据代理创建之前
* **该钩子函数执行后**，初始化数据，并通过Object.defineProperty()和给组件实例配置watcher观察者实例（发布-订阅者模式），实现**数据监测与数据代理**。
* 此时data中的数据和el还未初始化，即**所有vm身上并没有_data的属性**，无法通过Vue实例来访问data中的数据以及computed.watch,methods等中的方法
### created() - 创建后 （比较重要）
##### 指的是数据监测和数据代理创建之后
*  该钩子函数执行后，实例已完成以下配置：**数据观测，属性和方法的运算，watch/event事件回调，完成了data数据的初始化，可以访问data,computed,watch,methods上面的方法和数据**
* vm身上存在_data
* 但是**未挂载到DOM，不能访问到el属性，el属性和ref属性内容为空**
## 二、挂载
### beforeMount()
*  该阶段，页面呈现的是未经Vue编译的DOM结构 **所有对DOM的操作最终都不奏效**
*  在挂载开始之前被调用，这时页面中的插值语法都未被解析。**该钩子在服务器端渲染期间不被调用**
### mounted()
* 此时，页面上呈现的是**经过Vue编译的DOM** 对DOM的操作均有效
* 但是要**尽量避免操作DOM**
* **至此，初始化阶段全部完成。**
* 一般在此执行：==开启定时器，发送网络请求，订阅消息，绑定自定义事件==等初始化操作
## 三、更新
### beforeUpdate()
*  数在据发生变化后 DOM被更新前 执行beforeUpdate()钩子函数
* 此时 内存中数据是新的 但是页面是旧的 --- 在这个钩子函数中**页面和数据不同步**
* 该钩子在**服务器端渲染期间不被调用** 因为只有初次渲染会在服务器端进行
### updeted()
beforeUpdate执行结束之后，重新生成一个**新的虚拟dom(Vnode)**，用它和原来的Vnode**做比较（diff算法）** patch指的就是这个比较的过程
更新render函数中的数据，之后将render函数渲染成真实dom
完成了 **Model --> View** 的更新。
* 此时 内存中数据是新的和页面都是新的 在这个钩子函数中**页面和数据保持同步**
* Updated 不会保证所有的子组件也都被重新渲染完毕
* 如果希望等到整个视图都渲染完毕 可以在 updated 里使用 **vm.$nextTick**
## 四、销毁
### beforeDestroy() 
*  在销毁前，实例中所有的data、methods、computed、指令等，都处于**可用状态**
* 该钩子函数在服务器渲染期间不被调用
* 在此阶段，一般进行：==关闭定时器、取消订阅消息解绑自定义事件==等收尾工作。
### destroyed()
*  移除监视、所有的子组件、（自定义）事件的监听器，对应的Vue实例的所有指令都被解绑
*  该钩子函数在服务器渲染期间不被调用
## 其他（不知道怎么分类）
### activated 和 deactivated
Vue-router路由组件所独有的两个钩子 **用于捕获路由组件的激活状态**
#### activated()
被**keep-alive**缓存的组件激活时调用 该钩子在**服务器渲染期间不被调用**
#### deactivated()
被**keep-alive**缓存的组件失活时调用 该钩子在**服务器渲染期间不被调用**
### errorCaptured
==2.5.0+==新增 在捕获一个来自后代组件的错误时被调用
*  此钩子会收到三个参数：
    * 错误对象
    * 发生错误的组件实例
    * 一个包含错误来源信息的字符串。
* **此钩子可以返回 false 以阻止该错误继续向上传播。**
## 父子组件钩子函数在三个阶段的代码执行顺序

* **挂载** : 父亲created> 子created > 子mounted> 父亲mounted>
* **更新** : 父亲beforeUpdate > 子beforeUpdated > 子updated > 父亲updated
* **销毁** : 父亲beforeDestroy> 子beforeDestroy > 子destroyed> 父destroyed 
## 补充：常用的生命周期钩子：
### mounted: 
发送ajax请求、启动定时器、绑定自定义事件、订阅消息等 **【初始化操作】**。
### beforeDestroy: 
清除定时器、解绑自定义事件、取消订阅消息等 **【收尾工作】**。
## 补充：关于销毁Vue实例：
* 销毁后借助Vue开发者工具看不到任何信息。
* 销毁后自定义事件会失效，但原生DOM事件依然有效。
* 一般不会在beforeDestroy操作数据，因为即便操作数据，也不会再触发更新流程了。
# 生命周期面试题
## 什么是vue生命周期 有什么作用：
每个 Vue 实例在被创建时都要经过一系列的初始化过程——例如，需要设置数据监听、编译模板、将实例挂载到 DOM 并在数据变化时更新 DOM 等。
同时在这个过程中也会运行一些叫做 生命周期钩子 的函数，这给了用户在不同阶段添加自己的代码的机会。例如，如果想实现通过某些插件操作DOM节点，或者在页面渲染完后弹出广告窗等操作， 那我们最早可在mounted 中进行。
## 第一次页面加载会触发几个钩子
beforeCreate(创建前)  created(创建后)  beforeMount(挂载前)  mounted(挂载后)
## 简述每个周期具体适合哪些场景
* beforeCreate：在new一个vue实例后，只有一些默认的生命周期钩子和默认事件，其他的东西都还没创建。在beforeCreate生命周期执行的时候，data和methods中的数据都还没有初始化。不能在这个阶段使用data中的数据和methods中的方法

* created：data 和 methods都已经被初始化好了，如果要**调用 methods 中的方法，或者操作 data 中的数据，最早可以在这个阶段**中操作

* beforeMount：执行到这个钩子的时候，在内存中已经编译好了模板了，但是还没有挂载到页面中，此时页面还是旧的

* mounted：执行到这个钩子的时候，就表示Vue实例已经初始化完成了。此时组件脱离了创建阶段，进入到了运行阶段。 如果我们想要**通过插件操作页面上的DOM节点，最早可以在和这个阶段**中进行

* beforeUpdate： 当执行这个钩子时，页面中的显示的数据还是旧的，data中的数据是更新后的， 页面还没有和最新的数据保持同步

* updated：页面显示的数据和data中的数据已经保持同步了，都是最新的

* beforeDestory：Vue实例从运行阶段进入到了销毁阶段，这个时候上所有的 data 和 methods ， 指令， 过滤器 ……都是处于可用状态。还没有真正被销毁

* destroyed： 这个时候上所有的 data 和 methods ， 指令， 过滤器 ……都是处于不可用状态。组件已经被销毁了。
## created和mounted的区别
* created:在模板渲染成html前调用，即通常初始化某些属性值，然后再渲染成视图。
* mounted:在模板渲染成html后调用，通常是初始化页面完成后，再对html的dom节点进行一些需要的操作。
## vue获取数据在哪个周期函数
一般 created/beforeMount/mounted 皆可